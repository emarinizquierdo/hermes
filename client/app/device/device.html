<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
    <p>This view is for each user, to add or remove devices</p>
    <ul class="list-group">
        <li class="list-group-item">
            <div ng-class="{'device-connected' : device.status.on}" class="device-status pull-right"></div>
            <strong>{{device.name}}</strong>
            <br>
            <label>clientID:</label> <span class="text-muted">{{device.clientID}}</span>
            <br>
            <label>secret:</label> <span class="text-muted">{{device.secret}}</span>
            <a ng-click="deleteDevice(device)" class="trash"><span class="glyphicon glyphicon-trash pull-right"></span></a>
        </li>
    </ul>

    <li class="module-wrapper" ng-repeat="item in modules" data-drop="true" ng-model='modules' jqyoui-droppable="{index: {{$index}}}">
        <div module="item" device="device" update="updateModule" delete="deleteModule" data-drag="true" data-jqyoui-options="{revert: 'invalid'}" ng-model="modules" jqyoui-draggable="{index: {{$index}},animate:true}">
        </div>
    </li>

    <button ng-click="addModule()">Añadir módulo</button>

</div>
